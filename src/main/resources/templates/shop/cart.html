<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="indexhtml">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover" />
  <meta property="og:title" content="우리들의 모든 레시피 | 골라">
  <!-- <meta property="og:image" content=""> -->
  <meta property="og:description" content="우리들의 모든 레시피, 골라">
  <meta property="og:type" content="website">
  <!-- title -->
  <title>장바구니 | 골라</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/css/styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <!-- fontawesome -->
  <script src="https://kit.fontawesome.com/c21d7630fc.js" crossorigin="anonymous"></script>
  <!-- JavaScript -->
  <script type="text/javascript" src="/js/chatbot.js"></script>
  <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script>
  <!-- <script type="text/javascript" src="/js/click_disable.js"></script>
  <script type="text/javascript" src="/js/developer_tools.js"></script> -->
  <!-- Featherlight.js -->
  <script src="/js/featherlight.js"></script>
  <link rel="stylesheet" href="/css/featherlight.css">

</head>

<body class="cartbody">

	<!-- import header -->
	<header th:replace="layout/fragment2 :: fr_header"></header>
	<!-- end of import header -->
	
	<!-- center title -->
	<div>
		<span class="carttitle">CART</span>
	</div>

	<div>
		<form>
			
			<div class="cart_content">
				<!-- 장바구니 타이틀 시작 -->
			    <div class="cart_title">
			        <h2>장바구니</h2>
			        <ul>
			            <li class="cart_page_on"><span>01</span> 장바구니 <span><img src="/images/shop/icon_step_on.png" alt=""></span></li>
			            <li><span>02</span> 주문서작성/결제 <span><img src="/images/shop/icon_step_off.png" alt=""></span></li>
			            <li><span>03</span> 주문완료 </li>
			        </ul>
			    </div>
			    <!-- 장바구니 타이틀 끝 -->
			    
			   <div class="cart_cont">
				    <!-- 상품 목록 시작 -->
				    <!-- 장바구니에 상품이 하나이상 담겼을때 출력 시작 -->
				    <div class="cart_product_on" th:if="${count != 0}">
					    <table style="width: 100%;">
					    	<colgroup>
					    		<col style="width: 3%;">
			    				<col style="width: 41%;">
			    				<col style="width: 11%;">
			    				<col style="width: 11%;">
			    				<col style="width: 11%;">
			    				<col style="width: 11%;">
			    				<col style="width: 11%;">
			    			</colgroup>
			    			<thead>
				                <tr>
				                	<th>
				                		<input type="checkbox" id="cb1">
			    						<label for="cb1"></label>
				                	</th>
				                    <th>상품/옵션 정보</th>
				                    <th>수량</th>
				                    <th>상품금액</th>
				                    <th>할인/적립</th>
				                    <th>합계금액</th>
				                    <th>배송비</th>
				                </tr>
				            </thead>
				            <tbody th:each="list : ${list}">
				            		<tr>
				            		<td>
				                		<input type="checkbox" id="cb2">
			    						<label for="cb2"></label>
				                	</td>
					            	<td>
					            		<img th:src="${list.ProductDTO.pImage}" style="width:250px;height:250px">
				            			<span th:text="${list.ProductDTO.pName}"></span>
					            	</td>
					            	<td>
					            		<span th:text="${list.camount}"></span>개
					            	</td>
					            	<td>
					            		<span th:text="${list.ProductDTO.pPrice}" id="itemcomma"></span>원
					            	</td>
					            	<td>
					            		<img src="/images/shop/icon_mileage.gif">
					            		<span th:style="@{font-size:14px;}">적립
					            			<span th:text="${list.ProductDTO.pPoints * list.camount}" th:style="@{font-size:16px;}" ></span>원
					            		</span>
					            	</td>
					            	<td>
					            		<span th:text="${list.ProductDTO.pPrice * list.camount}" id="itemcomma2"></span>원
					            	</td>
					            	<td>
					            		<span th:text="${fee}"></span>원<br>
					            		<span></span>
					            		<span th:style="@{color:gray;font-size:14px;}">30,000원 이상<br>무료배송</span>
					            	</td>
				            	</tr>
				        	</tbody>
					    </table>
					</div>

				  <!-- 장바구니에 상품이 하나이상 담겼을때 출력 끝 -->
					<!-- 장바구니에 담긴 상품이 없을때 출력 시작 -->
				    <div class="cart_product_off" th:unless="${count != 0}">
				    	<p class="cart_no_data">장바구니에 담겨있는 상품이 없습니다.</p>
				    </div>
				    <!-- 장바구니에 담긴 상품이 없을때 출력 끝 -->
				    <!-- 상품 목록 끝 -->
				    
				    <!-- 이전으로 돌아가기 버튼 시작 -->
				   	<div class="cart_previous_btn">
				   		<a href="javascript:history.back();" class="cart_previous_link">쇼핑 계속하기</a>
				   	</div>
				   	<!-- 이전으로 돌아가기 버튼 끝 -->
				   	
				   	<!-- 상품 결제금액 시작 -->
				   	<div class="cart_price">
				        <ul class="final_payment">
							<li>
								<p class="final_payment_ti">총 상품 금액</p>
								<p class="final_payment_price">
									<input type="hidden" class="cart_normal_price" value="0">
									<span class="cart_normal_add_opt_price" th:text="${sumMoney}" id="itemcomma3"></span>원
								</p>
							</li>
							<li><img src="/images/shop/order_price_plus.png" alt="더하기"></li>
							<li>
								<p class="final_payment_ti">배송비</p>
								<input type="hidden" class="cart_total_save" value="0">
								<p class="final_payment_price"><span class="cart_total_add_opt_save" th:text="${fee}" id="itemcomma4"></span>원</p>
							</li>
							<li><img src="/images/shop/order_price_total.png" alt="합계"></li>
							<li>
								<p class="final_payment_ti">최종 결제 금액</p>
								<p class="final_payment_price"><span id="pay_amt" th:text="${allSum}"></span>원</p>
							</li>
						</ul>
				    </div>
				   	<!-- 상품 결제금액 끝 -->
			   	</div>
		    </div>
		</form>
    </div>
   	
   	<!-- import footer -->
   	<footer th:replace="layout/fragment2 :: fr_footer"></footer>
   	<!-- end of import footer -->
	
	<!-- Bootstrap -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
	crossorigin="anonymous"></script>
	<script src="http://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script type="text/javascript" src="/js/join.js"></script>
	<script type="text/javascript" src="/js/logineye.js"></script>

<script type="text/javascript">

var money = $('#itemcomma').text();
var moneycomma = money.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#itemcomma').text(moneycomma);

var money2 = $('#itemcomma2').text();
var moneycomma2 = money2.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#itemcomma2').text(moneycomma2);

var money3 = $('#itemcomma3').text();
var moneycomma3 = money3.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#itemcomma3').text(moneycomma3);

var money4 = $('#itemcomma4').text();
var moneycomma4 = money4.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#itemcomma4').text(moneycomma4);

var money5 = $('#pay_amt').text();
var moneycomma5 = money5.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#pay_amt').text(moneycomma5);

</script>

</body>

</html>