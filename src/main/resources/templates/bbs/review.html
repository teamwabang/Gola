<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"
    />
    <title>레시피게시판 | 골라</title>

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css" />

    <!-- JavaScript -->
    <script src="/js/jquery-3.6.0.min.js"></script>
  </head>
  <body> 
  
      <!-- import header -->
    <header th:replace="layout/fragment :: fr_header"></header>
    <!-- end of import header -->
  
  
  
	<!--main-->
	<section class="indexsection">
		<div class="indexmain">
			<div class="indexh1">
            	<h1> <span>USER </span> RECIPES  </h1>
        	</div>
		</div>
    </section>
    
    <!-- import footer -->
    <footer th:replace="layout/fragment :: fr_footer"></footer>
    <!-- end of import footer -->

   	<!-- Bootstrap -->
  	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script th:inline="javascript">

		//컨트롤러에서 받은 타임리프 값을 javascript 변수에 넣는다.
	    
		let list = [[${list}]];
	 	
		$(document).ready(function(){
	 		//엘리먼트생성 결과변수
	 		let result = "";
	 		if(list.length > 0){
	 			const splitList = [];
	 			//4칸씩 쪼개기
	 			for (let i = 0; i < list.length; i += 4){
	 				splitList.push(list.slice(i, i +4));
	 			}
/* 
	 			<div>
                <a href="/">
                     <img src="/images/test1.jpg"></a>
                <i class="xi-plus-thin"></i>
                <span> 난이도 '하'</span>
                <p> 래면</p>
              </div>
 */	 			
	 			for (let list of splitList){
	                const outerDiv = document.createElement("div");	
	                outerDiv.setAttribute("class","items reviewItems");
	                for( let item of list) {
	                	const innerDiv = document.createElement("div");
	                	const innerA = document.createElement("a");
	                	innerA.setAttribute("href","/bbs/detail?bno="+item.bno);
	                	const innerImg = document.createElement("img");
	                	innerImg.setAttribute("src",item.imgSrc);
	                	innerA.appendChild(innerImg);
	                	const innerI = document.createElement("i");
	                	innerI.setAttribute("class","xi-plus-thin");
	                	innerI.dataset.fno = item.bno;
	                	const innerSpan = document.createElement("span");
	                	innerSpan.textContent="난이도 '"+item.level+"' ";
	                	const innerP = document.createElement("p");
	                	innerP.textContent = item.title;
	                	innerDiv.appendChild(innerA);
	                	innerDiv.appendChild(innerI);
	                	innerDiv.appendChild(innerSpan);
	                	innerDiv.appendChild(innerP);
	                	outerDiv.appendChild(innerDiv);
	                }
	                
	                result += outerDiv.outerHTML;
	                
	 			}
	 		}else {
	 			result += '<div>레시피가 없습니다.</div>';
	 		}
	 		console.log(result);
	 		$('.indexmain').append(result);
		});
	 	
	 	$(document).on("click",".reviewItems > div > i ", function(){
	 		location.href = "/bbs/detail?bno="+$(this).data("fno");
	 	});
	 	
 	</script>
  </body>